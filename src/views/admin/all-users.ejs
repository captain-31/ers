<div class="my-4 px-2">
    <h2 class="card-title mb-3">List of all users</h2>
    <p class="card-text">You can update/delete users from this page.</p>
</div>

<% if(users) { %>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Email</th>
                <th scope="col">Type</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>

            <% for (var i = 0; i < users.length; i++ ) { %>

                <tr>
                    <th scope="row"><%= i+1 %></th>
                    <td><%= users[i].name %></td>
                    <td><%= users[i].email %></td>
                    <td><%= users[i].type %></td>
                    <td> 
                        <a href="/admin/user/edit/<%= users[i]._id %>" class="text-decoration-none pe-2"> <img src="/images/edit-3.svg" alt="edit" > </a>
                        <a href="/admin/user/delete/<%= users[i]._id %>" class="text-decoration-none delete-link"> <img src="/images/trash.svg" alt="delete"> </a>
                        
                    </td>
                </tr>
            
            <% } %>

        </tbody>
    </table>


<% } else { %> 

    <p class="p-2 text-danger">Users not found</p>
    
<% } %>

<script>
    const deleteLinks = document.querySelectorAll('.delete-link');
    deleteLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            if (confirm('Are you sure you want to delete this user?')) {
                window.location.href = this.getAttribute('href');
            }
        });
    });
</script>